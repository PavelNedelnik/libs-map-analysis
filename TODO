add table
complete TODOs
refactor src/custom_components.py